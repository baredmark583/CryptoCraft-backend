import { Repository } from 'typeorm';
import { Product } from './entities/product.entity';
import { ProductModerationEvent } from './entities/product-moderation-event.entity';
import { ProductRevision } from './entities/product-revision.entity';
import { CreateProductDto } from './dto/create-product.dto';
import { UpdateProductDto } from './dto/update-product.dto';
import { ApproveProductDto } from './dto/approve-product.dto';
import { RejectProductDto } from './dto/reject-product.dto';
import { AppealProductDto } from './dto/appeal-product.dto';
import { User, UserRole } from '../users/entities/user.entity';
import { CategoriesService } from '../categories/categories.service';
import { FindProductsQueryDto } from './dto/find-products-query.dto';
export declare class ProductsService {
    private readonly productsRepository;
    private readonly moderationEventRepository;
    private readonly revisionsRepository;
    private readonly usersRepository;
    private readonly categoriesService;
    constructor(productsRepository: Repository<Product>, moderationEventRepository: Repository<ProductModerationEvent>, revisionsRepository: Repository<ProductRevision>, usersRepository: Repository<User>, categoriesService: CategoriesService);
    create(createProductDto: CreateProductDto): Promise<Product>;
    findAll(query?: FindProductsQueryDto): Promise<Product[]>;
    findOne(id: string): Promise<Product>;
    update(id: string, updateProductDto: UpdateProductDto, actorId?: string, actorRole?: UserRole): Promise<Product>;
    remove(id: string): Promise<void>;
    approveProduct(id: string, dto: ApproveProductDto, moderatorId: string): Promise<Product>;
    rejectProduct(id: string, dto: RejectProductDto, moderatorId: string): Promise<Product>;
    appealProduct(id: string, dto: AppealProductDto, requesterId: string): Promise<Product>;
    getModerationEvents(productId: string, requesterId: string, role: UserRole): Promise<ProductModerationEvent[]>;
    getRevisions(productId: string, requesterId: string, role: UserRole): Promise<ProductRevision[]>;
    restoreRevision(productId: string, revisionId: string, requesterId: string, role: UserRole): Promise<Product>;
    private isModerator;
    private assertCanEdit;
    private validateUrl;
    private sanitizeHtml;
    private sanitizeProductInput;
    private sanitizeDynamicAttributeKey;
    private normalizeDynamicAttributes;
    private extractDynamicAttributeValue;
    private logModerationEvent;
    private recordRevision;
    private buildSnapshot;
    private applySnapshot;
}
